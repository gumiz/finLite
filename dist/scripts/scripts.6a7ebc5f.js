"use strict";angular.module("finLiteApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ngDialog","angular-growl"]).config(["$routeProvider","growlProvider",function(a,b){b.globalTimeToLive(5e3),a.when("/accounts",{templateUrl:"views/accounts.html",controller:"AccountsCtrl"}).when("/documents",{templateUrl:"views/documents.html",controller:"DocumentsCtrl"}).when("/reports",{templateUrl:"views/reports.html",controller:"ReportsCtrl"}).otherwise({redirectTo:"/documents"})}]).directive("autoActive",["$location",function(a){return{restrict:"A",scope:!1,link:function(b,c){function d(){var b=a.path();b&&angular.forEach(c.find("li"),function(a){var c=a.querySelector("a");c.href.match("#"+b+"(?=\\?|$)")?angular.element(a).addClass("active"):angular.element(a).removeClass("active")})}d(),b.$on("$locationChangeSuccess",d)}}}]),angular.module("finLiteApp").controller("MainCtrl",["$scope","$location",function(a,b){a.getClass=function(a){return b.path().substr(0,a.length)==a?"active":""}}]),angular.module("finLiteApp").controller("AccountsCtrl",["$scope","repositoryService","dialogService","notify",function(a,b,c,d){var e=function(b){a.accounts=b,d.info("odświeżono dane")},f=function(){b.getAccount(e)};a.refresh=f,a.addAccount=function(){b.addAccount(a.newAccount,f)};var g=function(a){return function(){return b.deleteAccount(a,f)}};a.deleteAccount=function(a){c.confirmation("Czy na pewno chcesz usunąć to konto?",g(a))},f()}]),angular.module("finLiteApp").controller("DocumentsCtrl",["$scope",function(a){var b=function(b){a.documents=documents,notify.info("odświeżono dane")},c=function(){repositoryService.getDocuments(b)};a.refresh=c,a.addDocument=function(){repositoryService.addDocument(a.newDocument,c)};var d=function(a){return function(){return repositoryService.deleteDocument(a,c)}};a.deleteDocument=function(a){dialogService.confirmation("Czy na pewno chcesz usunąć dokument?",d(a))},c()}]),angular.module("finLiteApp").service("repositoryService",["$http","ajaxService",function(a,b){var c=function(a){b.doGetWithBlock("getAccounts").then(a)},d=function(a,c){b.doPostWithBlock("addAccounts",a).then(c)},e=function(a,c){b.doPostWithBlock("deleteAccounts",{id:a}).then(c)},f=function(a){b.doGetWithBlock("getDocuments").then(a)},g=function(a,c){b.doPostWithBlock("addDocuments",a).then(c)},h=function(a,c){b.doPostWithBlock("deleteDocuments",{id:a}).then(c)};return{addAccount:d,deleteAccount:e,getAccount:c,addDocument:g,deleteDocument:h,getDocument:f}}]),angular.module("finLiteApp").service("ajaxService",["$http","$rootScope","notify","$q",function(a,b,c,d){function e(a){b.incrementAsyncRequestCount&&a&&b.incrementAsyncRequestCount()}function f(a){b.decrementAsyncRequestCount&&a&&b.decrementAsyncRequestCount()}function g(a,b,d){var e=d||"Wystąpił błąd podczas przetwarzania";c.error(e),a.reject(b)}function h(a,b){return j(a,b,!0)}function i(a){return k(a,!0)}var j=function(b,c,h){e(h);var i=d.defer();return a.post(b,c).success(function(a){f(h),i.resolve(a)}).error(function(a,b){f(h),g(i,b,a)}),i.promise},k=function(b,c){e(c);var h=d.defer();return a.get(b).success(function(a){f(c),h.resolve(a)}).error(function(a,b){f(c),g(h,b,a)}),h.promise};return{doGet:k,doPost:j,doPostWithBlock:h,doGetWithBlock:i}}]),angular.module("finLiteApp").factory("dialogService",["ngDialog",function(a){var b=function(b){a.openConfirm({template:"<p>"+b+'</p>                <div class="ngdialog-buttons">                    <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="confirm(1)">OK</button>                </div>',plain:!0})},c=function(b,c){a.openConfirm({template:"<p>"+b+'</p>                <div class="ngdialog-buttons">                    <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog(0)">Nie</button>                    <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="confirm(1)">Tak</button>                </div>',plain:!0}).then(function(a){c()},function(a){})},d=function(b,c){a.openConfirm({template:b,scope:c})},e=function(){a.close()};return{showMessage:b,confirmation:c,showDialog:d,closeDialog:e}}]),angular.module("finLiteApp").service("notify",["growl",function(a){var b=function(b){a.info(b,{title:"FinLite informuje"})},c=function(b){a.error(b,{title:"Błąd!"})};return{info:b,error:c}}]),angular.module("finLiteApp").controller("ReportsCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);